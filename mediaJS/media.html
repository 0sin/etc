<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Media JS</title>
</head>
<body>
  
<script>
  // Property
  // matches:	Used to check the results of a query. Returns a boolean value: true if the document matches the media query list, otherwise false
  // media:	A String, representing the serialized media query list
  var m = matchMedia("screen and (min-width: 1024px)");
  console.log(m.media) // -> "screen and (min-width: 1024px)" 주어진 미디어 쿼리를 string 으로 serialize 한 값
  console.log(m.matches) // -> true

  // Method
  // addListener(functionref)	Adds a new listener function, which is executed whenever the media query's evaluated result changes
  // removeListener(functionref)	Removes a previously added listener function from the media query list. Does nothing if the specified listener is not already in the list

  function myFunction(x) {
    if (x.matches) { // If media query matches
      document.body.style.backgroundColor = "yellow";
    } else {
      document.body.style.backgroundColor = "pink";
    }
  }

  var x = window.matchMedia("(max-width: 700px)")
  myFunction(x) // Call listener function at run time
  x.addListener(myFunction) // Attach listener function on state changes

</script>

<h1 id="h1"></h1>
<script>
// Create a condition that targets viewports at least 768px wide
const mediaQuery = window.matchMedia('(min-width: 768px)')
const h1 = document.getElementById('h1');

function handleTabletChange(e) {
  // Check if the media query is true
  if (e.matches) {
    // Then log the following message to the console
    h1.innerHTML = 'true'
  } else {
    h1.innerHTML = 'false'
  }
}

// Register event listener
mediaQuery.addListener(handleTabletChange)

// Initial check
handleTabletChange(mediaQuery)
</script>

<script>
  // The old way of doing things
  function checkMediaQuery() {
    // If the inner width of the window is greater then 768px
    if (window.innerWidth > 768) {
      // Then log this message to the console
      console.log('Media Query Matched!')
    }
  }

// Add a listener for when the window resizes
window.addEventListener('resize', checkMediaQuery);
</script>

<script>
 // 600px 보다 크면 matches 가 false, 크면 true 가 되는 미디어 쿼리 리스트 생성
const mediaQueryList = window.matchMedia(`(max-width: 600px)`);

// document 가 미디어 쿼리를 충족시키는것에 대해 변화가 생기면 콘솔에 로깅한다
const changeHandler = (e) => { //e: : MediaQueryListEvent
  console.log("changed!");
};

// 600px 을 기준으로 document width 가 바뀔 때 마다 이벤트 핸들러를 호출한다
mediaQueryList.addEventListener("change", changeHandler);
//IE 의 경우 change 이벤트를 발생시키지 않기 때문에, IE 에서는 addListener() 로 이벤트 핸들러를 달아주어야 한다.
</script>

</body>
</html>